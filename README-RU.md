# –°–∏—Å—Ç–µ–º–∞ —Å–±–æ—Ä–∞ –∏ –ø—Ä–æ–≥–Ω–æ–∑–∞ –ø–æ–≥–æ–¥—ã

–≠—Ç–æ —Ç–µ—Å—Ç–æ–≤—ã–π –ø—Ä–æ–µ–∫—Ç, –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—é—â–∏–π —Å–æ–±–æ–π –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–Ω—É—é —Å–∏—Å—Ç–µ–º—É –¥–ª—è —Å–±–æ—Ä–∞ –ø–æ–≥–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö —Å –º–µ—Ç–µ–æ—Å—Ç–∞–Ω—Ü–∏–π –∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–∏—è –ø—Ä–æ–≥–Ω–æ–∑–æ–≤ –Ω–∞ –∏—Ö –æ—Å–Ω–æ–≤–µ.

## –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ
- [–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞](#–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞)
    - [–°—Ö–µ–º–∞ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è](#—Å—Ö–µ–º–∞-–≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è)
- [–¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫](#—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π-—Å—Ç–µ–∫)
- [–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞](#—Å—Ç—Ä—É–∫—Ç—É—Ä–∞-–ø—Ä–æ–µ–∫—Ç–∞)
- [–ó–∞–ø—É—Å–∫ —Å–∏—Å—Ç–µ–º—ã](#–∑–∞–ø—É—Å–∫-—Å–∏—Å—Ç–µ–º—ã)
    - [–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è](#—Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è)
    - [–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –∑–∞–ø—É—Å–∫—É](#–∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è-–ø–æ-–∑–∞–ø—É—Å–∫—É)
    - [–î–æ—Å—Ç—É–ø –∫ —Å–µ—Ä–≤–∏—Å–∞–º](#–¥–æ—Å—Ç—É–ø-–∫-—Å–µ—Ä–≤–∏—Å–∞–º)
- [–ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è API (cURL)](#–ø—Ä–∏–º–µ—Ä—ã-–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è-api-curl)
    - [–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥](#–º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥)
- [–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è](#–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è)
- [–ö–æ–Ω—Ç–∞–∫—Ç—ã](#–∫–æ–Ω—Ç–∞–∫—Ç—ã)

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

–°–∏—Å—Ç–µ–º–∞ —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ —Å–ª–µ–¥—É—é—â–∏—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤:

-   **Weather Gateway Service**: API-—à–ª—é–∑, –ø—Ä–∏–Ω–∏–º–∞—é—â–∏–π –¥–∞–Ω–Ω—ã–µ –æ—Ç —Å—Ç–∞–Ω—Ü–∏–π –∏ –∑–∞–ø—Ä–æ—Å—ã –Ω–∞ –ø—Ä–æ–≥–Ω–æ–∑ –æ—Ç –∫–ª–∏–µ–Ω—Ç–æ–≤.
-   **Weather Processing Service**: –°–µ—Ä–≤–∏—Å, –∫–æ—Ç–æ—Ä—ã–π –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –ø–æ—Å—Ç—É–ø–∞—é—â–∏–µ –¥–∞–Ω–Ω—ã–µ, —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –∏—Ö –≤ –±–∞–∑—É –∏ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –ø—Ä–æ–≥–Ω–æ–∑—ã.
-   **PostgreSQL**: –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏—Ö –ø–æ–≥–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö.
-   **RabbitMQ**: –ë—Ä–æ–∫–µ—Ä —Å–æ–æ–±—â–µ–Ω–∏–π –¥–ª—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–≥–æ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è –º–µ–∂–¥—É —à–ª—é–∑–æ–º –∏ —Å–µ—Ä–≤–∏—Å–æ–º –æ–±—Ä–∞–±–æ—Ç–∫–∏.

### –°—Ö–µ–º–∞ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è

```mermaid
graph TB
    subgraph "–í–Ω–µ—à–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã"
        WS["üå°Ô∏è –ú–µ—Ç–µ–æ—Å—Ç–∞–Ω—Ü–∏—è"]
        Client["üë§ –ö–ª–∏–µ–Ω—Ç"]
    end

    subgraph "–°–∏—Å—Ç–µ–º–∞ —Å–±–æ—Ä–∞ –∏ –ø—Ä–æ–≥–Ω–æ–∑–∞"
        direction LR
        GW["‚öôÔ∏è Weather<br/>Gateway"]
        RMQ["üì® RabbitMQ"]
        PS["‚öôÔ∏è Processing<br/>Service"]
        DB[("üóÑÔ∏è PostgreSQL")]
    end

    %% –ü–æ—Ç–æ–∫ 1: –°–±–æ—Ä –¥–∞–Ω–Ω—ã—Ö (–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π, —Å–ø–ª–æ—à–Ω–∞—è –ª–∏–Ω–∏—è)
    WS -- "POST /data" --> GW
    GW -- "–ü—É–±–ª–∏–∫–∞—Ü–∏—è" --> RMQ
    RMQ -- "–û–±—Ä–∞–±–æ—Ç–∫–∞" --> PS
    PS -- "–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ" --> DB

    %% –ü–æ—Ç–æ–∫ 2: –ó–∞–ø—Ä–æ—Å –ø—Ä–æ–≥–Ω–æ–∑–∞ (–°–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π, –ø—É–Ω–∫—Ç–∏—Ä–Ω–∞—è –ª–∏–Ω–∏—è)
    Client -.-> |"GET /forecast"| GW
    GW -.-> |"HTTP-–∑–∞–ø—Ä–æ—Å"| PS
    PS -.-> |"–ß—Ç–µ–Ω–∏–µ<br/>–∏—Å—Ç–æ—Ä–∏–∏"| DB

    %% –°—Ç–∏–ª–∏
    classDef station fill:#87CEEB,stroke:#333,stroke-width:2px
    classDef service fill:#90EE90,stroke:#333,stroke-width:2px
    classDef broker fill:#FFB6C1,stroke:#333,stroke-width:2px
    classDef database fill:#DDA0DD,stroke:#333,stroke-width:2px
    classDef client fill:#F0E68C,stroke:#333,stroke-width:2px

    class WS station
    class GW,PS service
    class RMQ broker
    class DB database
    class Client client
```

## –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

-   Java 21
-   Spring Boot 3.3
-   Spring Data JPA
-   Spring AMQP (RabbitMQ)
-   Spring WebFlux (–¥–ª—è WebClient)
-   PostgreSQL 15
-   Maven
-   Docker & Docker Compose
-   Lombok
-   Spring Boot Actuator

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

–ü—Ä–æ–µ–∫—Ç —è–≤–ª—è–µ—Ç—Å—è –º–Ω–æ–≥–æ–º–æ–¥—É–ª—å–Ω—ã–º Maven-–ø—Ä–æ–µ–∫—Ç–æ–º:

-   `weather-system`: –†–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–π POM.
-   `weather-shared`: –ú–æ–¥—É–ª—å —Å –æ–±—â–∏–º–∏ DTO –∏ –∫–æ–Ω—Å—Ç–∞–Ω—Ç–∞–º–∏.
-   `weather-gateway`: –ú–æ–¥—É–ª—å API-—à–ª—é–∑–∞.
-   `weather-processing`: –ú–æ–¥—É–ª—å —Å–µ—Ä–≤–∏—Å–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∏ –ø—Ä–æ–≥–Ω–æ–∑–∏—Ä–æ–≤–∞–Ω–∏—è.

## –ó–∞–ø—É—Å–∫ —Å–∏—Å—Ç–µ–º—ã

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

-   Java 21+
-   Apache Maven 3.8+
-   Docker –∏ Docker Compose

### –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –∑–∞–ø—É—Å–∫—É

1.  **–°–±–æ—Ä–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞**
    –ò–∑ –∫–æ—Ä–Ω–µ–≤–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ `weather-system` –≤—ã–ø–æ–ª–Ω–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É –¥–ª—è —Å–±–æ—Ä–∫–∏ –≤—Å–µ—Ö –º–æ–¥—É–ª–µ–π:
    ```bash
    mvn clean package
    ```

2.  **–ó–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ Docker Compose**
    –≠—Ç–∞ –∫–æ–º–∞–Ω–¥–∞ —Å–æ–±–µ—Ä–µ—Ç Docker-–æ–±—Ä–∞–∑—ã –¥–ª—è —Å–µ—Ä–≤–∏—Å–æ–≤ –∏ –∑–∞–ø—É—Å—Ç–∏—Ç –≤—Å—é —Å–∏—Å—Ç–µ–º—É (–≤–∫–ª—é—á–∞—è PostgreSQL –∏ RabbitMQ):
    ```bash
    docker-compose up --build
    ```
    –°–∏—Å—Ç–µ–º–∞ –±—É–¥–µ—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é –≥–æ—Ç–æ–≤–∞ –∫ —Ä–∞–±–æ—Ç–µ —á–µ—Ä–µ–∑ 1-2 –º–∏–Ω—É—Ç—ã.

### –î–æ—Å—Ç—É–ø –∫ —Å–µ—Ä–≤–∏—Å–∞–º

-   **API Gateway**: `http://localhost:8080`
-   **Processing Service**: `http://localhost:8081`
-   **RabbitMQ Management UI**: `http://localhost:15672` (–ª–æ–≥–∏–Ω/–ø–∞—Ä–æ–ª—å: `guest`/`guest`)
-   **PostgreSQL**: `localhost:5432`

## –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è API (cURL)

**–í–∞–∂–Ω–æ:** –î–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –ø—Ä–æ–≥–Ω–æ–∑–∞ —Å–Ω–∞—á–∞–ª–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –∫–∞–∫ –º–∏–Ω–∏–º—É–º –¥–≤–∞ –Ω–∞–±–æ—Ä–∞ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –æ–¥–Ω–æ–π –∏ —Ç–æ–π –∂–µ —Å—Ç–∞–Ω—Ü–∏–∏.

1.  **–û—Ç–ø—Ä–∞–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö —Å –º–µ—Ç–µ–æ—Å—Ç–∞–Ω—Ü–∏–∏**

    –û—Ç–ø—Ä–∞–≤–∏–º –Ω–µ—Å–∫–æ–ª—å–∫–æ –∑–∞–ø–∏—Å–µ–π –¥–ª—è —Å—Ç–∞–Ω—Ü–∏–∏ `station-01` —Å –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–º –≤ –æ–¥–∏–Ω —á–∞—Å (–≤ Windows –≤—ã–ø–æ–ª–Ω–∏—Ç—å –∏—Å–ø–æ–ª—å–∑—É—è cmd).

    ```bash
    curl -X POST http://localhost:8080/api/v1/weather/data -H "Content-Type: application/json" -d "{\"stationId\": \"station-01\", \"timestamp\": \"2025-10-07T10:00:00Z\", \"temperature\": 25.0, \"humidity\": 65.0, \"pressure\": 1013.0, \"precipitation\": 0.0}"
    ```
    ```bash
    curl -X POST http://localhost:8080/api/v1/weather/data -H "Content-Type: application/json" -d "{\"stationId\": \"station-01\", \"timestamp\": \"2025-10-07T11:00:00Z\", \"temperature\": 25.5, \"humidity\": 64.0, \"pressure\": 1012.8, \"precipitation\": 0.0}"
    ```
    –í –æ—Ç–≤–µ—Ç –Ω–∞ –∫–∞–∂–¥—ã–π –∑–∞–ø—Ä–æ—Å —Å–µ—Ä–≤–µ—Ä –≤–µ—Ä–Ω–µ—Ç —Å—Ç–∞—Ç—É—Å `202 Accepted`.

2.  **–ü–æ–ª—É—á–µ–Ω–∏–µ –ø—Ä–æ–≥–Ω–æ–∑–∞ –ø–æ–≥–æ–¥—ã**

    –¢–µ–ø–µ—Ä—å –∑–∞–ø—Ä–æ—Å–∏–º –ø—Ä–æ–≥–Ω–æ–∑ –¥–ª—è —Å—Ç–∞–Ω—Ü–∏–∏ `station-01` –Ω–∞ —Å–ª–µ–¥—É—é—â–∏–µ 3 —á–∞—Å–∞.

    ```bash
    curl -X GET "http://localhost:8080/api/v1/weather/forecast?stationId=station-01&hours=3"
    ```

    **–ü—Ä–∏–º–µ—Ä –æ—Ç–≤–µ—Ç–∞:**

    ```json
    {
      "stationId": "station-01",
      "generatedAt": "2024-05-21T18:30:00.123456Z",
      "forecasts": [
        {
          "timestamp": "2025-10-07T12:00:00Z",
          "temperature": 26.0,
          "humidity": 63.0,
          "pressure": 1012.6,
          "precipitation": 0.0
        },
        {
          "timestamp": "2025-10-07T13:00:00Z",
          "temperature": 26.5,
          "humidity": 62.0,
          "pressure": 1012.4,
          "precipitation": 0.0
        },
        {
          "timestamp": "2025-10-07T14:00:00Z",
          "temperature": 27.0,
          "humidity": 61.0,
          "pressure": 1012.2,
          "precipitation": 0.0
        }
      ]
    }
    ```

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

–î–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å–µ—Ä–≤–∏—Å–æ–≤ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Actuator health-check —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã:

-   `http://localhost:8080/actuator/health`
-   `http://localhost:8081/actuator/health`

## –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

| EN                                | RU                                |
|:----------------------------------|:----------------------------------|
| [README –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–æ–º](README.md) | [README –Ω–∞ —Ä—É—Å—Å–∫–æ–º](README-RU.md) |

## –ö–æ–Ω—Ç–∞–∫—Ç—ã

–°–æ–∑–¥–∞–Ω–æ [@akardapolov](mailto:akardapolov@yandex.ru)